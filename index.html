<!-- âœ… Fixed version of your file with login loop bug removed -->
<!-- Only the login part is updated, rest kept same -->
<!-- This is your original file with corrected Firebase auth handling -->

<!-- START of your file -->
<html class="scroll-smooth" dir="ltr" lang="en">
<head>
  <!-- ...[rest of your head remains unchanged]... -->
</head>
<body class="bg-gray-50 min-h-screen flex flex-col">
  <!-- ...[your full HTML content remains unchanged]... -->

  <!-- ðŸ”» Existing Firebase SDKs -->
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-functions-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-messaging-compat.js"></script>

  <script>
    // Firebase config (unchanged)
    const firebaseConfig = {
      apiKey: "YOUR_API_KEY",
      authDomain: "YOUR_AUTH_DOMAIN",
      projectId: "YOUR_PROJECT_ID",
      storageBucket: "YOUR_STORAGE_BUCKET",
      messagingSenderId: "YOUR_MESSAGING_SENDER_ID",
      appId: "YOUR_APP_ID",
      measurementId: "YOUR_MEASUREMENT_ID"
    };
    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const db = firebase.firestore();
    const functions = firebase.functions();
    const messaging = firebase.messaging();

    // ðŸ”§ âœ… FIXED: Corrected Auth state listener to prevent reload loop
    let currentUser = null;
    auth.onAuthStateChanged(user => {
      currentUser = user;
      if (user) {
        profileName.value = user.displayName || '';
        profileEmail.value = user.email || '';
        navMenu.classList.remove('hidden');
        mobileMenu.classList.remove('hidden');
        loadWalletBalance();
        loadPendingOrdersCount();
      } else {
        alert('Please login to access BULLA Top Up.');
        // ðŸ”„ Removed reload loop â€” use redirect only if login.html exists
        // window.location.href = "login.html";
      }
    });

    // âœ… Rest of your original JS logic remains unchanged below...
    // [Wallet, Product loading, Orders, Reviews, Chat, etc.]

  </script>
</body>
</html>